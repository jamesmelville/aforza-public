function runAction(e){e.data.message="";let _=new Map,r=new Map,d=new Map,u=!1;return e.data.related.OrderItem.forEach(t=>{_.set(t.Product2Id,t.Quantity)}),e.data.related.aforza__Relationship_Rule__c.forEach(t=>{if(t.aforza__Type__c==="Addition")if(r.has(t.aforza__Target_Product__c))r.get(t.aforza__Target_Product__c).push(t);else{let a=new Array;a.push(t),r.set(t.aforza__Target_Product__c,a)}}),e.data.related.Product2.forEach(t=>{d.set(t.Id,t)}),e.data.related.OrderItem.forEach(t=>{let a=0,o=!1;r.has(t.Product2Id)&&(r.get(t.Product2Id).forEach(c=>{_.has(c.aforza__Source_Product__c)&&(a+=_.get(c.aforza__Source_Product__c)*c.aforza__Quantity__c,o=!0)}),d.get(t.Product2Id).ProductCode==="9999300"&&t.Quantity!=a&&(t.Quantity=a,u=!0))}),e.data.message+="Your Deposit Return Scheme has been validated",u?e.data.updateDeviceData={Order:!0,OrderItem:!0}:e.data.updateDeviceData=!1,e.data.reprice=!1,e}
